# 🎯 多模型AI食物识别 - 配置指南

## 🚀 升级说明

食物识别功能已升级为**多模型AI识别系统**，支持3个主流AI视觉服务：

1. **百度AI** - 推荐⭐⭐⭐⭐⭐
2. **腾讯云AI** - 备选⭐⭐⭐⭐
3. **通义千问** - 备选⭐⭐⭐

系统会自动选择最佳可用的服务，确保识别准确率和稳定性。

## 📊 模型对比

| 特性 | 百度AI | 腾讯云AI | 通义千问 |
|------|--------|----------|----------|
| 食物识别准确率 | 95%+ | 90%+ | 85%+ |
| 中文食物支持 | 优秀 | 良好 | 良好 |
| 识别速度 | 快（1-2秒） | 快（1-2秒） | 中（2-5秒） |
| 免费额度 | 有 | 有 | 有 |
| 配置难度 | 简单 | 中等 | 简单 |
| 推荐指数 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |

## 🎯 推荐方案

### 方案1：百度AI（推荐）
**优点**：
- ✅ 专门针对食物识别优化
- ✅ 支持8000+种菜品
- ✅ 识别准确率最高（95%+）
- ✅ 返回卡路里等营养信息
- ✅ 配置简单
- ✅ 有免费额度

**缺点**：
- ❌ 需要注册百度智能云账号

### 方案2：腾讯云AI（备选）
**优点**：
- ✅ 识别准确率高（90%+）
- ✅ 支持多种食物
- ✅ 有免费额度

**缺点**：
- ❌ 配置相对复杂
- ❌ 需要签名计算

### 方案3：通义千问（备选）
**优点**：
- ✅ 通用视觉模型
- ✅ 配置简单
- ✅ 有免费额度

**缺点**：
- ❌ 不是专门的食物识别模型
- ❌ 准确率相对较低

## 🔧 配置步骤

### 方案1：配置百度AI（推荐）

#### 步骤1：注册百度智能云
1. 访问：https://cloud.baidu.com/
2. 注册/登录百度账号
3. 完成实名认证

#### 步骤2：创建应用
1. 进入控制台：https://console.bce.baidu.com/ai/
2. 选择"图像识别" → "菜品识别"
3. 点击"创建应用"
4. 填写应用名称（如：减重小程序）
5. 选择"菜品识别"接口
6. 提交创建

#### 步骤3：获取API Key
1. 在应用列表中找到刚创建的应用
2. 查看"API Key"和"Secret Key"
3. 复制这两个密钥

#### 步骤4：配置到小程序
打开 `utils/config.js`，找到：
```javascript
const BAIDU_API_KEY = 'YOUR_API_KEY_HERE';
const BAIDU_SECRET_KEY = 'YOUR_SECRET_KEY_HERE';
```

替换为：
```javascript
const BAIDU_API_KEY = 'your-actual-api-key';
const BAIDU_SECRET_KEY = 'your-actual-secret-key';
```

#### 步骤5：测试
1. 保存文件
2. 重新编译（Ctrl + B）
3. 拍照识别食物
4. 查看控制台："使用百度AI食物识别"

### 方案2：配置腾讯云AI（备选）

#### 步骤1：注册腾讯云
1. 访问：https://cloud.tencent.com/
2. 注册/登录腾讯云账号
3. 完成实名认证

#### 步骤2：开通服务
1. 进入控制台
2. 搜索"图像分析"
3. 开通"食品识别"服务

#### 步骤3：获取密钥
1. 访问：https://console.cloud.tencent.com/cam/capi
2. 创建密钥
3. 获取SecretId和SecretKey

#### 步骤4：配置到小程序
```javascript
const TENCENT_SECRET_ID = 'your-secret-id';
const TENCENT_SECRET_KEY = 'your-secret-key';
const TENCENT_APP_ID = 'your-app-id';
```

### 方案3：配置通义千问（备选）

参考之前的配置指南：`🔑获取API-Key指南.md`

## 🎯 自动选择逻辑

系统会按以下优先级自动选择：

```
1. 检查百度AI配置
   ↓ 已配置 → 使用百度AI
   ↓ 未配置
2. 检查腾讯云AI配置
   ↓ 已配置 → 使用腾讯云AI
   ↓ 未配置
3. 检查通义千问配置
   ↓ 已配置 → 使用通义千问
   ↓ 未配置
4. 使用模拟识别
```

## 💰 费用说明

### 百度AI
- **免费额度**：每天500次
- **超出后**：0.003元/次
- **月调用量**：
  - 0-5万次：0.003元/次
  - 5-10万次：0.002元/次
  - 10万次以上：0.001元/次

### 腾讯云AI
- **免费额度**：每月1000次
- **超出后**：0.0025元/次

### 通义千问
- **免费额度**：新用户有免费额度
- **超出后**：约0.01-0.02元/次

## 📸 识别效果

### 百度AI识别示例
```
输入：一张鸡胸肉的照片
输出：
{
  name: "鸡胸肉",
  probability: 0.95,
  calorie: 165
}
```

### 识别准确率
- **常见菜品**：95%+
- **家常菜**：90%+
- **复杂菜品**：85%+

## 🔍 故障排查

### 问题1：百度AI识别失败
**检查**：
1. API Key和Secret Key是否正确
2. 是否有免费额度
3. 网络是否正常
4. 查看控制台错误信息

**解决**：
- 重新获取密钥
- 充值账户
- 检查网络
- 系统会自动降级到其他服务

### 问题2：识别不准确
**原因**：
- 照片质量不好
- 光线不足
- 食物不清晰

**解决**：
1. 重新拍照，注意拍照技巧
2. 使用手动选择功能
3. 调整识别后的份量

### 问题3：识别速度慢
**原因**：
- 网络速度慢
- 服务器响应慢

**解决**：
- 使用更快的网络
- 等待识别完成（通常1-5秒）
- 系统会自动超时降级

## 🎨 拍照技巧

### 最佳实践
- ✅ 食物占据画面中心
- ✅ 光线充足
- ✅ 单一食物
- ✅ 从正上方拍摄
- ✅ 白色或浅色背景
- ✅ 画面清晰

### 避免
- ❌ 光线太暗
- ❌ 食物模糊
- ❌ 多种食物混合
- ❌ 复杂背景
- ❌ 距离太远

## 📊 性能对比

| 指标 | 百度AI | 腾讯云AI | 通义千问 | 模拟识别 |
|------|--------|----------|----------|----------|
| 准确率 | 95%+ | 90%+ | 85%+ | 随机 |
| 速度 | 1-2秒 | 1-2秒 | 2-5秒 | 2秒 |
| 费用 | 低 | 低 | 中 | 免费 |
| 配置难度 | 简单 | 中等 | 简单 | 无需配置 |

## 🎯 推荐配置

### 个人使用
- 配置百度AI即可
- 每天500次免费额度足够使用

### 商业使用
- 配置百度AI + 腾讯云AI
- 双重保障，自动切换
- 成本可控

### 测试使用
- 无需配置
- 使用模拟识别
- 功能完整

## 📚 相关文档

- [百度AI文档](https://ai.baidu.com/ai-doc/IMAGERECOGNITION/Xk3bcxe21)
- [腾讯云AI文档](https://cloud.tencent.com/document/product/865)
- [通义千问文档](https://help.aliyun.com/zh/dashscope/)

## ✅ 配置检查清单

- [ ] 已选择AI服务（百度/腾讯/通义千问）
- [ ] 已注册账号并实名认证
- [ ] 已创建应用/开通服务
- [ ] 已获取API密钥
- [ ] 已配置到config.js
- [ ] 已保存文件
- [ ] 已重新编译
- [ ] 已测试识别功能
- [ ] 查看控制台日志
- [ ] 识别结果正常

## 🎉 成功标准

### 基础功能
- ✅ 可以拍照或选择图片
- ✅ AI识别成功
- ✅ 显示识别结果
- ✅ 营养信息准确
- ✅ 可以添加到饮食记录

### 高级功能
- ✅ 识别准确率高（90%+）
- ✅ 识别速度快（1-2秒）
- ✅ 自动降级机制正常
- ✅ 用户体验流畅

---

**准备好了吗？**
选择一个AI服务，按照上面的步骤配置，开启高精度食物识别！🎉

**推荐：优先配置百度AI，识别效果最好！**
