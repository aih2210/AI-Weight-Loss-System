# ⚡ 代谢分析快速测试指南

## 🎯 测试目标

验证代谢率分析功能使用真实准确的科学数据和计算公式。

---

## 📱 测试步骤

### 1️⃣ 打开小程序
1. 打开微信开发者工具
2. 导入项目：`E:\重要重要！！！\AI减重系统-项目测试\miniprogram-weight-loss`
3. 点击"编译"

### 2️⃣ 准备测试数据

#### 方法A：使用现有数据
如果已有体重、饮食、运动记录，直接进入第3步。

#### 方法B：添加测试数据
在首页或相关页面添加：

**体重记录**（至少14天）：
- 第1天：60.0kg
- 第7天：59.0kg
- 第14天：58.5kg
- 第21天：58.0kg

**饮食记录**（每天）：
- 早餐：400 kcal
- 午餐：600 kcal
- 晚餐：500 kcal
- 总计：1500 kcal/天

**运动记录**（每周3-4次）：
- 跑步30分钟：250 kcal
- 或其他运动

### 3️⃣ 进入代谢分析页面

1. 点击底部导航"我的"
2. 找到"代谢分析"入口
3. 点击进入

---

## ✅ 验证要点

### 1. BMR计算（Mifflin-St Jeor公式）

**查看位置**：代谢率数据卡片

**验证内容**：
- ✅ 显示"当前BMR"数值
- ✅ 显示"Mifflin-St Jeor公式"说明
- ✅ 数值合理（一般1200-2000 kcal）

**手动验证**：
```
男性：BMR = 10 × 体重 + 6.25 × 身高 - 5 × 年龄 + 5
女性：BMR = 10 × 体重 + 6.25 × 身高 - 5 × 年龄 - 161

示例（女性，30岁，170cm，60kg）：
BMR = 10 × 60 + 6.25 × 170 - 5 × 30 - 161
    = 600 + 1062.5 - 150 - 161
    = 1351.5 kcal
```

### 2. 理论TDEE计算

**查看位置**：代谢率数据卡片

**验证内容**：
- ✅ 显示"理论TDEE"数值
- ✅ 显示"BMR × 活动系数"说明
- ✅ 数值 = BMR × 1.2~1.9

**手动验证**：
```
中等活动（1.55）：
TDEE = 1351.5 × 1.55 = 2094.8 kcal
```

### 3. 实际TDEE计算（重点！）

**查看位置**：代谢率数据卡片

**验证内容**：
- ✅ 显示"实际TDEE"数值（如果有14天以上数据）
- ✅ 显示"基于真实数据"说明
- ✅ 显示TDEE对比分析卡片

**科学原理**：
```
能量平衡方程：
体重变化 = (摄入 - TDEE) / 7700 kcal

反推实际TDEE：
实际TDEE = 平均摄入 + 平均运动 - (体重变化 × 7700 / 天数)

示例（14天，60kg→58.5kg，平均摄入1500，平均运动250）：
体重变化 = -1.5kg
实际TDEE = 1500 + 250 - (-1.5 × 7700 / 14)
         = 1750 - (-825)
         = 2575 kcal
```

### 4. TDEE对比分析

**查看位置**：TDEE对比分析卡片

**验证内容**：
- ✅ 显示理论值与实际值差异
- ✅ 显示差异百分比
- ✅ 显示智能分析说明
- ✅ 显示数据置信度

**分析说明**：
- **差异 < 100 kcal**：✅ 理论值与实际值接近，数据准确
- **实际 > 理论**：💡 实际代谢高于理论值，可能运动量较大
- **实际 < 理论**：💡 实际代谢低于理论值，可能活动量较少

### 5. 体重趋势预测

**查看位置**：未来7天体重趋势预测卡片

**验证内容**：
- ✅ 显示当前体重和预测体重
- ✅ 显示预计变化
- ✅ 显示每日预测（7天）
- ✅ 每天显示置信度
- ✅ 显示预测假设（平均摄入、运动、BMR）

**科学原理**：
```
逐日模拟：
每天BMR变化 = (预测BMR - 当前BMR) / 7
每天TDEE = 当天BMR × 活动系数
每天体重变化 = (摄入 - TDEE - 运动) / 7700

置信度衰减：
第1天：90%
第2天：82%
第3天：74%
...
```

### 6. 趋势调整建议

**查看位置**：趋势调整建议卡片

**验证内容**：
- ✅ 根据预测结果显示建议
- ✅ 建议分优先级（重要/建议/参考）
- ✅ 建议分类型（饮食/运动/警告/成功）
- ✅ 提供具体调整数值

**建议类型**：
- ⚠️ 体重上升预警
- ⚠️ 减重速度过快
- ✅ 减重速度理想
- 📊 减重速度较慢
- 🎯 接近目标
- 🍽️ 调整饮食
- 🏃 增加运动

### 7. 代谢变化趋势

**查看位置**：代谢变化趋势卡片

**验证内容**：
- ✅ 显示变化率百分比
- ✅ 根据变化率显示不同颜色
- ✅ 显示智能分析说明

**分级标准**：
- **< -8%**：🔴 代谢下降明显
- **-8% ~ -4%**：🟡 代谢轻度下降
- **-4% ~ 0%**：✅ 代谢保持稳定
- **> 0%**：🎉 代谢有所提升

### 8. 平台期检测

**查看位置**：平台期预警卡片

**验证内容**：
- ✅ 显示是否检测到平台期
- ✅ 如果是平台期，显示持续天数
- ✅ 显示检测置信度
- ✅ 提供突破建议

**科学判定**：
```
平台期条件（同时满足）：
1. 体重变化率 < 0.2%（每周）
2. 持续时间 ≥ 14天
3. 体重标准差 < 0.5kg
```

---

## 🔬 数据准确性验证

### 测试案例1：理想减重

**输入数据**：
- 用户：女性，30岁，170cm
- 体重：60kg → 59.3kg（14天）
- 平均摄入：1500 kcal/天
- 平均运动：250 kcal/天

**预期结果**：
```
BMR ≈ 1352 kcal
理论TDEE ≈ 2095 kcal（活动系数1.55）
实际TDEE ≈ 2140 kcal
差异：+45 kcal (+2.1%)
减重速度：0.5kg/周 ✅
建议：继续保持当前计划
```

### 测试案例2：平台期

**输入数据**：
- 用户：女性，30岁，170cm
- 体重：58kg → 58.1kg（14天）
- 平均摄入：1700 kcal/天
- 平均运动：200 kcal/天

**预期结果**：
```
BMR ≈ 1332 kcal
理论TDEE ≈ 2065 kcal
实际TDEE ≈ 1955 kcal
差异：-110 kcal (-5.3%)
体重变化率：0.17% ⚠️
平台期：是（置信度85%）
建议：减少200 kcal摄入或增加运动
```

---

## 📊 界面检查清单

### 代谢率数据卡片
- [ ] 显示当前BMR + 公式说明
- [ ] 显示理论TDEE + 计算说明
- [ ] 显示实际TDEE + 数据来源（如果有足够数据）
- [ ] 显示预测BMR + 预测时间

### TDEE对比卡片（如果有实际TDEE）
- [ ] 显示差异数值和百分比
- [ ] 显示智能分析说明
- [ ] 显示数据置信度

### 代谢变化卡片
- [ ] 显示变化率百分比
- [ ] 根据变化率显示不同颜色
- [ ] 显示分析说明

### 体重趋势预测卡片
- [ ] 显示当前→预测体重
- [ ] 显示7天每日预测
- [ ] 每天显示置信度
- [ ] 显示预测假设

### 趋势调整建议卡片
- [ ] 根据预测显示建议
- [ ] 建议有优先级标识
- [ ] 建议有类型图标
- [ ] 提供具体数值

### 平台期预警卡片
- [ ] 显示检测结果
- [ ] 显示持续天数（如果是平台期）
- [ ] 显示置信度
- [ ] 提供突破建议

---

## 🎯 功能测试

### 测试1：刷新分析
1. 点击"🔄 刷新分析"按钮
2. 验证：显示加载动画
3. 验证：数据重新计算
4. 验证：时间戳更新

### 测试2：查看建议详情
1. 点击任意建议卡片
2. 验证：弹出详细说明
3. 验证：显示完整内容

### 测试3：快捷操作
1. 点击"⚖️ 记录体重"
2. 验证：跳转到体重更新页面
3. 返回，点击"🍽️ 记录饮食"
4. 验证：跳转到饮食记录页面
5. 返回，点击"🏃 记录运动"
6. 验证：跳转到运动记录页面

### 测试4：详细数据展开
1. 点击"📈 详细数据"
2. 验证：展开显示详细信息
3. 再次点击
4. 验证：收起详细信息

---

## ✅ 验收标准

### 必须通过
- ✅ BMR使用Mifflin-St Jeor公式
- ✅ 显示公式说明
- ✅ 理论TDEE = BMR × 活动系数
- ✅ 实际TDEE基于能量平衡方程
- ✅ 显示TDEE对比分析
- ✅ 体重预测使用逐日模拟
- ✅ 显示预测假设和置信度
- ✅ 提供科学的调整建议

### 数据准确性
- ✅ BMR计算误差 < 5%
- ✅ TDEE计算合理
- ✅ 体重预测符合能量平衡
- ✅ 置信度计算正确

### 用户体验
- ✅ 界面清晰易懂
- ✅ 数据展示完整
- ✅ 建议具体可行
- ✅ 操作流畅无卡顿

---

## 🐛 常见问题

### Q1：没有显示实际TDEE？
**原因**：数据不足（少于7天）
**解决**：继续记录体重、饮食、运动数据

### Q2：实际TDEE与理论TDEE差异很大？
**原因**：
1. 活动系数选择不准确
2. 数据记录不完整
3. 体重波动较大

**解决**：
1. 检查数据记录是否准确
2. 继续记录更多天数
3. 查看置信度（低于70%说明数据不足）

### Q3：预测体重不准确？
**原因**：
1. 历史数据太少
2. 饮食/运动不规律
3. 体重波动大

**解决**：
1. 至少记录14天数据
2. 保持规律的饮食和运动
3. 查看置信度

### Q4：没有检测到平台期？
**原因**：
1. 数据不足14天
2. 体重仍在变化
3. 体重波动较大

**说明**：这是正常的，说明减重进展良好

---

## 📝 测试记录

### 测试日期：_______

### 测试结果：

#### BMR计算
- [ ] 通过
- 实际值：_______ kcal
- 手动计算：_______ kcal
- 误差：_______ %

#### TDEE计算
- [ ] 理论TDEE通过
- [ ] 实际TDEE通过（如果有数据）
- 理论值：_______ kcal
- 实际值：_______ kcal
- 差异：_______ kcal

#### 体重预测
- [ ] 通过
- 预测7天变化：_______ kg
- 置信度：_______ %

#### 平台期检测
- [ ] 通过
- 检测结果：_______
- 置信度：_______ %

#### 界面显示
- [ ] 所有卡片正常显示
- [ ] 数据格式正确
- [ ] 颜色标识清晰

#### 功能操作
- [ ] 刷新分析正常
- [ ] 查看建议正常
- [ ] 快捷操作正常
- [ ] 详细数据展开正常

### 问题记录：
_______________________________
_______________________________
_______________________________

---

## 🎉 测试完成

如果所有验证点都通过，恭喜！代谢率分析功能已完全基于科学数据和公式！

**下一步**：
1. 继续记录数据，获得更准确的分析
2. 根据建议调整减重计划
3. 定期查看代谢分析报告
4. 享受科学减重的乐趣！

---

**💡 提示**：代谢分析需要至少14天的完整数据才能获得最准确的结果。坚持记录，数据越多，分析越准确！
