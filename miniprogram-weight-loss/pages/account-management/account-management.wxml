<!--pages/account-management/account-management.wxml-->
<view class="container">
  <!-- 登录状态卡片 -->
  <view class="card login-status-card">
    <view class="status-header">
      <view class="status-icon">{{isLoggedIn ? '✅' : '⚠️'}}</view>
      <view class="status-info">
        <view class="status-title">{{isLoggedIn ? '已登录' : '未登录'}}</view>
        <view class="status-desc">{{isLoggedIn ? '账号已同步到云端' : '登录后可同步数据到云端'}}</view>
      </view>
    </view>
    
    <view wx:if="{{isLoggedIn}}" class="account-info">
      <view class="info-row">
        <view class="info-label">用户名</view>
        <view class="info-value">{{username}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">邮箱</view>
        <view class="info-value">{{email}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">注册时间</view>
        <view class="info-value">{{registerDate}}</view>
      </view>
    </view>
  </view>

  <!-- 账号操作 -->
  <view class="card">
    <view wx:if="{{!isLoggedIn}}">
      <button class="action-button primary" bindtap="goToLogin">
        <view class="button-icon">🔐</view>
        <view class="button-text">登录账号</view>
      </button>
      <button class="action-button secondary" bindtap="goToRegister">
        <view class="button-icon">✨</view>
        <view class="button-text">注册新账号</view>
      </button>
      <view class="tip-text">
        💡 登录后可以：
        <view class="tip-item">• 数据云端同步，换设备也不怕</view>
        <view class="tip-item">• 多设备数据共享</view>
        <view class="tip-item">• 数据永久保存</view>
      </view>
    </view>

    <view wx:else>
      <view class="list-item" bindtap="showChangePassword">
        <view class="list-icon">🔑</view>
        <view class="list-content">
          <view class="list-title">修改密码</view>
        </view>
        <text class="arrow">›</text>
      </view>
      <view class="list-item" bindtap="showChangeEmail">
        <view class="list-icon">📧</view>
        <view class="list-content">
          <view class="list-title">修改邮箱</view>
        </view>
        <text class="arrow">›</text>
      </view>
      <view class="list-item" bindtap="syncData">
        <view class="list-icon">☁️</view>
        <view class="list-content">
          <view class="list-title">同步数据</view>
          <view class="list-desc">上次同步：{{lastSyncTime}}</view>
        </view>
        <text class="arrow">›</text>
      </view>
      <view class="list-item" bindtap="showAccountSecurity">
        <view class="list-icon">🛡️</view>
        <view class="list-content">
          <view class="list-title">账号安全</view>
        </view>
        <text class="arrow">›</text>
      </view>
    </view>
  </view>

  <!-- 危险操作 -->
  <view wx:if="{{isLoggedIn}}" class="card danger-zone">
    <view class="section-title danger-title">危险操作</view>
    <button class="action-button danger" bindtap="confirmLogout">
      <view class="button-icon">🚪</view>
      <view class="button-text">退出登录</view>
    </button>
    <button class="action-button danger-outline" bindtap="confirmDeleteAccount">
      <view class="button-icon">⚠️</view>
      <view class="button-text">注销账号</view>
    </button>
  </view>
</view>
