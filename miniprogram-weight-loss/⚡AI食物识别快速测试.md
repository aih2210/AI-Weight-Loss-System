# ⚡ AI食物识别快速测试

## 🎯 快速开始

### 方法1：使用模拟识别（无需配置）
1. 打开小程序
2. 进入"饮食记录"页面
3. 点击"拍照识别"按钮
4. 拍照或选择图片
5. 查看模拟识别结果

**特点**：
- ✅ 无需配置，开箱即用
- ✅ 识别速度快（2秒）
- ❌ 识别结果是随机的
- ❌ 不是真实的AI识别

### 方法2：使用真实AI识别（需要配置）
1. 获取通义千问API Key
2. 配置到 `utils/config.js`
3. 重新编译小程序
4. 拍照识别食物
5. 查看真实AI识别结果

**特点**：
- ✅ 真实的AI图像识别
- ✅ 识别准确度高
- ✅ 智能估算份量和营养
- ❌ 需要配置API Key
- ❌ 按量计费（新用户有免费额度）

## 📸 测试用例

### 测试1：识别鸡胸肉
1. 准备一块鸡胸肉
2. 拍照识别
3. 预期结果：
   - 名称：鸡胸肉
   - 类别：肉类
   - 热量：约165卡/100g
   - 蛋白质：约31g/100g

### 测试2：识别米饭
1. 准备一碗米饭
2. 拍照识别
3. 预期结果：
   - 名称：米饭
   - 类别：主食
   - 热量：约116卡/100g
   - 碳水：约26g/100g

### 测试3：识别苹果
1. 准备一个苹果
2. 拍照识别
3. 预期结果：
   - 名称：苹果
   - 类别：水果
   - 热量：约52卡/100g
   - 碳水：约14g/100g

### 测试4：识别西兰花
1. 准备西兰花
2. 拍照识别
3. 预期结果：
   - 名称：西兰花
   - 类别：蔬菜
   - 热量：约34卡/100g
   - 蛋白质：约3g/100g

## 🔍 验证识别结果

### 1. 检查控制台
打开微信开发者工具的控制台，查看：
- "AI识别响应" - AI返回的原始数据
- "解析AI结果失败" - 如果出现错误
- "未配置API Key，使用模拟识别" - 如果未配置

### 2. 查看识别信息
- **置信度**：
  - 模拟识别：75-100%（随机）
  - AI识别：通常85-98%
- **份量估算**：
  - 模拟识别：固定范围
  - AI识别：根据图片智能估算
- **营养建议**：
  - 模拟识别：基于数据库生成
  - AI识别：AI生成的个性化建议

### 3. 对比数据库
识别结果应该与食物数据库中的营养成分接近：
- 误差范围：±10%为正常
- 如果误差太大，可能是识别错误

## 🎨 拍照测试技巧

### 好的照片示例
```
✅ 光线充足
✅ 食物清晰
✅ 占据画面中心
✅ 白色背景
✅ 单一食物
```

### 不好的照片示例
```
❌ 光线太暗
❌ 食物模糊
❌ 食物太小
❌ 复杂背景
❌ 多种食物混合
```

## 📊 性能测试

### 识别速度
- **模拟识别**：2秒
- **AI识别**：2-5秒（取决于网络）

### 识别准确率
- **常见食物**：90%+
- **复杂食物**：70-85%
- **混合食物**：60-75%

### 建议
- 单一食物识别效果最好
- 常见食物识别更准确
- 复杂食物可以手动选择

## 🐛 常见问题

### Q1：一直显示"AI识别中"
**原因**：网络问题或API调用失败
**解决**：
1. 检查网络连接
2. 查看控制台错误
3. 系统会自动降级到模拟识别

### Q2：识别结果不准确
**原因**：照片质量问题
**解决**：
1. 重新拍照，注意拍照技巧
2. 使用手动选择功能
3. 调整份量

### Q3：提示"未配置API Key"
**原因**：config.js中未配置API Key
**解决**：
1. 获取通义千问API Key
2. 配置到config.js
3. 重新编译

## 🎯 测试清单

- [ ] 拍照识别功能正常
- [ ] 相册选择功能正常
- [ ] 手动选择功能正常
- [ ] 识别历史显示正常
- [ ] 份量调整功能正常
- [ ] 营养成分计算正确
- [ ] 添加到饮食记录成功
- [ ] AI识别（如已配置）
- [ ] 模拟识别降级正常
- [ ] 识别历史保存正常

## 📝 测试报告模板

```
测试时间：2025-12-28
测试环境：微信开发者工具 / 真机
API配置：已配置 / 未配置

测试结果：
1. 拍照识别：✅ 正常 / ❌ 异常
2. 相册选择：✅ 正常 / ❌ 异常
3. 手动选择：✅ 正常 / ❌ 异常
4. AI识别：✅ 正常 / ❌ 异常 / ⚠️ 未配置
5. 识别准确度：高 / 中 / 低
6. 识别速度：快 / 中 / 慢

问题记录：
- 问题1：描述
- 问题2：描述

建议：
- 建议1
- 建议2
```

## 🎉 成功标准

### 基础功能（必须）
- ✅ 可以拍照或选择图片
- ✅ 显示识别结果
- ✅ 可以调整份量
- ✅ 可以添加到饮食记录
- ✅ 识别历史正常工作

### 高级功能（可选）
- ✅ AI识别准确度高
- ✅ 识别速度快
- ✅ 营养建议有价值
- ✅ 用户体验流畅

---

**开始测试吧！**
按照上面的步骤测试食物识别功能，有问题随时反馈！🎉
