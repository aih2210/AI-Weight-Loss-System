# ğŸ¯ YOLOé£Ÿç‰©æ£€æµ‹ç³»ç»Ÿè¯´æ˜

## ğŸ“– ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿé›†æˆäº†åŸºäº**YOLOv8**çš„é£Ÿç‰©æ£€æµ‹åŠŸèƒ½ï¼Œæä¾›é«˜ç²¾åº¦çš„å®æ—¶é£Ÿç‰©è¯†åˆ«å’Œè¥å…»åˆ†æã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¾®ä¿¡å°ç¨‹åº      â”‚
â”‚  (å‰ç«¯)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ HTTPè¯·æ±‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FastAPIåç«¯    â”‚
â”‚  (Python)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  YOLOæ£€æµ‹å™¨     â”‚
â”‚  (YOLOv8)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. YOLOç›®æ ‡æ£€æµ‹
- **æ¨¡å‹**ï¼šYOLOv8ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰
- **å‡†ç¡®ç‡**ï¼š90%+
- **é€Ÿåº¦**ï¼šå®æ—¶æ£€æµ‹ï¼ˆ<1ç§’ï¼‰
- **æ”¯æŒ**ï¼šå¤šç›®æ ‡åŒæ—¶æ£€æµ‹

### 2. é£Ÿç‰©è¯†åˆ«
- **COCOæ•°æ®é›†**ï¼š10ç§é£Ÿç‰©ç±»åˆ«
- **æ‰©å±•æ•°æ®åº“**ï¼š16ç§ä¸­æ–‡é£Ÿç‰©
- **è‡ªåŠ¨åŒ¹é…**ï¼šæ™ºèƒ½è¥å…»ä¿¡æ¯æŸ¥è¯¢

### 3. è¥å…»åˆ†æ
- **è‡ªåŠ¨ä¼°ç®—**ï¼šåŸºäºè¾¹ç•Œæ¡†å¤§å°ä¼°ç®—ä»½é‡
- **è¥å…»è®¡ç®—**ï¼šçƒ­é‡ã€è›‹ç™½è´¨ã€ç¢³æ°´ã€è„‚è‚ª
- **æ™ºèƒ½å»ºè®®**ï¼šä¸ªæ€§åŒ–è¥å…»å»ºè®®

## ğŸ“Š æ”¯æŒçš„é£Ÿç‰©ç±»åˆ«

### COCOæ•°æ®é›†ï¼ˆ10ç§ï¼‰
1. é¦™è•‰ (Banana)
2. è‹¹æœ (Apple)
3. ä¸‰æ˜æ²» (Sandwich)
4. æ©™å­ (Orange)
5. è¥¿å…°èŠ± (Broccoli)
6. èƒ¡èåœ (Carrot)
7. çƒ­ç‹— (Hot dog)
8. æŠ«è¨ (Pizza)
9. ç”œç”œåœˆ (Donut)
10. è›‹ç³• (Cake)

### æ‰©å±•æ•°æ®åº“ï¼ˆ16ç§ï¼‰
1. ç±³é¥­
2. é¢æ¡
3. é¸¡èƒ¸è‚‰
4. ç‰›è‚‰
5. é¸¡è›‹
6. è±†è…
7. è¥¿å…°èŠ±
8. èƒ¡èåœ
9. è‹¹æœ
10. é¦™è•‰
11. æ©™å­
12. ä¸‰æ˜æ²»
13. æŠ«è¨
14. çƒ­ç‹—
15. ç”œç”œåœˆ
16. è›‹ç³•

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæœ¬åœ°éƒ¨ç½²ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰

#### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- CUDA 11.0+ï¼ˆå¯é€‰ï¼Œç”¨äºGPUåŠ é€Ÿï¼‰
- 8GB+ RAM
- 2GB+ ç£ç›˜ç©ºé—´

#### å®‰è£…æ­¥éª¤

1. **å®‰è£…ä¾èµ–**
```bash
cd backend
pip install -r requirements.txt
```

2. **ä¸‹è½½YOLOæ¨¡å‹**
```bash
# è‡ªåŠ¨ä¸‹è½½ï¼ˆé¦–æ¬¡è¿è¡Œæ—¶ï¼‰
python yolo_food_detector.py
```

3. **å¯åŠ¨æœåŠ¡**
```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```

4. **æµ‹è¯•æœåŠ¡**
```bash
curl http://localhost:8000/api/yolo/health
```

### æ–¹æ¡ˆ2ï¼šäº‘ç«¯éƒ¨ç½²ï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰

#### é€‰é¡¹Aï¼šé˜¿é‡Œäº‘ECS
1. åˆ›å»ºECSå®ä¾‹ï¼ˆ2æ ¸4GBï¼‰
2. å®‰è£…Pythonå’Œä¾èµ–
3. éƒ¨ç½²FastAPIæœåŠ¡
4. é…ç½®Nginxåå‘ä»£ç†
5. å¯ç”¨HTTPS

#### é€‰é¡¹Bï¼šè…¾è®¯äº‘SCF
1. åˆ›å»ºäº‘å‡½æ•°
2. ä¸Šä¼ ä»£ç å’Œæ¨¡å‹
3. é…ç½®APIç½‘å…³
4. è®¾ç½®è§¦å‘å™¨

#### é€‰é¡¹Cï¼šDockeréƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t yolo-food-detector .

# è¿è¡Œå®¹å™¨
docker run -p 8000:8000 yolo-food-detector
```

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯é…ç½®

`backend/yolo_food_detector.py`
```python
class YOLOFoodDetector:
    def __init__(self, model_path: str = 'yolov8n.pt'):
        # æ¨¡å‹é€‰æ‹©ï¼š
        # yolov8n.pt - æœ€å¿«ï¼Œå‡†ç¡®ç‡è¾ƒä½
        # yolov8s.pt - å¹³è¡¡
        # yolov8m.pt - å‡†ç¡®ç‡é«˜ï¼Œé€Ÿåº¦ä¸­ç­‰
        # yolov8l.pt - å‡†ç¡®ç‡å¾ˆé«˜ï¼Œé€Ÿåº¦è¾ƒæ…¢
        # yolov8x.pt - æœ€å‡†ç¡®ï¼Œæœ€æ…¢
        self.model = YOLO(model_path)
```

### å°ç¨‹åºé…ç½®

`utils/config.js`
```javascript
// YOLOåç«¯æœåŠ¡åœ°å€
const YOLO_API_URL = 'http://your-server:8000/api/yolo';
```

## ğŸ“± å°ç¨‹åºé›†æˆ

### æ–¹æ³•1ï¼šæ·»åŠ YOLOé€‰é¡¹

åœ¨ `pages/food-recognition/food-recognition.js` ä¸­æ·»åŠ ï¼š

```javascript
// è°ƒç”¨YOLOæ£€æµ‹
callYOLODetection(base64Image) {
  const that = this;
  const config = require('../../utils/config.js');
  
  wx.request({
    url: `${config.YOLO_API_URL}/detect`,
    method: 'POST',
    data: {
      image: base64Image
    },
    success: (res) => {
      if (res.data.success) {
        that.processYOLOResult(res.data.primary_food);
      } else {
        that.simulateRecognition();
      }
    },
    fail: (err) => {
      console.error('YOLOæ£€æµ‹å¤±è´¥:', err);
      that.simulateRecognition();
    }
  });
}
```

### æ–¹æ³•2ï¼šä¼˜å…ˆçº§è°ƒæ•´

```javascript
callAIRecognition(base64Image) {
  // ä¼˜å…ˆçº§ï¼šYOLO > ç™¾åº¦AI > è…¾è®¯äº‘AI > é€šä¹‰åƒé—®
  if (config.YOLO_API_URL && config.YOLO_API_URL !== 'YOUR_API_URL_HERE') {
    this.callYOLODetection(base64Image);
  } else if (config.BAIDU_API_KEY) {
    this.callBaiduAI(base64Image);
  } else {
    // ... å…¶ä»–æœåŠ¡
  }
}
```

## ğŸ¯ APIæ¥å£

### 1. æ£€æµ‹é£Ÿç‰©
```
POST /api/yolo/detect
```

**è¯·æ±‚**ï¼š
```json
{
  "image": "base64_encoded_image"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "message": "æ£€æµ‹æˆåŠŸ",
  "primary_food": {
    "name": "è‹¹æœ",
    "confidence": 95.5,
    "category": "æ°´æœ",
    "portion": 150,
    "calories": 78,
    "protein": 0.5,
    "carbs": 20.7,
    "fat": 0.3,
    "bbox": [100, 100, 300, 300],
    "suggestions": [
      "ğŸ æ°´æœè™½å¥½ï¼Œä½†ä¹Ÿè¦æ³¨æ„ç³–åˆ†",
      "âœ¨ ä½è„‚é£Ÿç‰©ï¼Œå‡è„‚æœŸæ¨è"
    ]
  },
  "all_detections": [...],
  "detection_count": 1
}
```

### 2. å¥åº·æ£€æŸ¥
```
GET /api/yolo/health
```

**å“åº”**ï¼š
```json
{
  "status": "healthy",
  "yolo_available": true,
  "supported_foods": ["é¦™è•‰", "è‹¹æœ", ...]
}
```

### 3. è·å–ä¿¡æ¯
```
GET /api/yolo/info
```

**å“åº”**ï¼š
```json
{
  "available": true,
  "model": "YOLOv8",
  "supported_classes": 10,
  "food_list": ["é¦™è•‰", "è‹¹æœ", ...],
  "nutrition_db_size": 16
}
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æ£€æµ‹æ€§èƒ½
- **å‡†ç¡®ç‡**ï¼š90%+ï¼ˆCOCOæ•°æ®é›†ï¼‰
- **é€Ÿåº¦**ï¼š
  - CPUï¼š1-2ç§’/å¼ 
  - GPUï¼š<0.5ç§’/å¼ 
- **å†…å­˜å ç”¨**ï¼š
  - yolov8nï¼š~10MB
  - yolov8sï¼š~20MB
  - yolov8mï¼š~50MB

### ç³»ç»Ÿæ€§èƒ½
- **å¹¶å‘**ï¼šæ”¯æŒå¤šç”¨æˆ·åŒæ—¶æ£€æµ‹
- **ååé‡**ï¼š10-50 QPSï¼ˆå–å†³äºç¡¬ä»¶ï¼‰
- **å»¶è¿Ÿ**ï¼š<2ç§’ï¼ˆåŒ…æ‹¬ç½‘ç»œä¼ è¾“ï¼‰

## ğŸ” æ£€æµ‹æµç¨‹

```
1. ç”¨æˆ·æ‹ç…§
   â†“
2. å›¾ç‰‡è½¬Base64
   â†“
3. å‘é€åˆ°åç«¯
   â†“
4. YOLOæ¨¡å‹æ£€æµ‹
   â†“
5. æå–è¾¹ç•Œæ¡†å’Œç±»åˆ«
   â†“
6. æŸ¥è¯¢è¥å…»æ•°æ®åº“
   â†“
7. ä¼°ç®—ä»½é‡
   â†“
8. è®¡ç®—è¥å…»æˆåˆ†
   â†“
9. ç”Ÿæˆå»ºè®®
   â†“
10. è¿”å›ç»“æœ
```

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. æ¨¡å‹ä¼˜åŒ–
- ä½¿ç”¨é‡åŒ–æ¨¡å‹å‡å°ä½“ç§¯
- ä½¿ç”¨TensorRTåŠ é€Ÿæ¨ç†
- ä½¿ç”¨ONNXæ ¼å¼æé«˜å…¼å®¹æ€§

### 2. æ€§èƒ½ä¼˜åŒ–
- å¯ç”¨GPUåŠ é€Ÿ
- ä½¿ç”¨æ‰¹å¤„ç†
- å®ç°ç»“æœç¼“å­˜
- ä½¿ç”¨CDNåŠ é€Ÿå›¾ç‰‡ä¼ è¾“

### 3. å‡†ç¡®ç‡ä¼˜åŒ–
- ä½¿ç”¨æ›´å¤§çš„æ¨¡å‹ï¼ˆyolov8m/l/xï¼‰
- å¾®è°ƒæ¨¡å‹ï¼ˆä½¿ç”¨é£Ÿç‰©æ•°æ®é›†ï¼‰
- å¢åŠ åå¤„ç†é€»è¾‘
- ç»“åˆå¤šä¸ªæ¨¡å‹çš„ç»“æœ

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ¨¡å‹åŠ è½½å¤±è´¥
**åŸå› **ï¼šæ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨æˆ–æŸå

**è§£å†³**ï¼š
```bash
# é‡æ–°ä¸‹è½½æ¨¡å‹
python -c "from ultralytics import YOLO; YOLO('yolov8n.pt')"
```

### é—®é¢˜2ï¼šæ£€æµ‹é€Ÿåº¦æ…¢
**åŸå› **ï¼šä½¿ç”¨CPUæ¨ç†

**è§£å†³**ï¼š
1. å®‰è£…CUDAå’ŒcuDNN
2. å®‰è£…GPUç‰ˆæœ¬çš„PyTorch
3. ä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼ˆyolov8nï¼‰

### é—®é¢˜3ï¼šæ£€æµ‹ä¸å‡†ç¡®
**åŸå› **ï¼š
- ç…§ç‰‡è´¨é‡å·®
- å…‰çº¿ä¸è¶³
- é£Ÿç‰©ä¸åœ¨è®­ç»ƒé›†ä¸­

**è§£å†³**ï¼š
1. æé«˜ç…§ç‰‡è´¨é‡
2. ä½¿ç”¨æ›´å¤§çš„æ¨¡å‹
3. å¾®è°ƒæ¨¡å‹
4. é™çº§åˆ°å…¶ä»–AIæœåŠ¡

## ğŸ“š ç›¸å…³èµ„æº

- [YOLOv8å®˜æ–¹æ–‡æ¡£](https://docs.ultralytics.com/)
- [COCOæ•°æ®é›†](https://cocodataset.org/)
- [FastAPIæ–‡æ¡£](https://fastapi.tiangolo.com/)
- [PyTorchæ–‡æ¡£](https://pytorch.org/docs/)

## ğŸ‰ æ€»ç»“

YOLOé£Ÿç‰©æ£€æµ‹ç³»ç»Ÿæä¾›äº†ï¼š
- âœ… é«˜ç²¾åº¦çš„å®æ—¶æ£€æµ‹
- âœ… å¤šç›®æ ‡åŒæ—¶è¯†åˆ«
- âœ… è‡ªåŠ¨è¥å…»åˆ†æ
- âœ… çµæ´»çš„éƒ¨ç½²æ–¹æ¡ˆ
- âœ… å®Œå–„çš„APIæ¥å£

**æ¨èä½¿ç”¨åœºæ™¯**ï¼š
- éœ€è¦é«˜ç²¾åº¦è¯†åˆ«
- éœ€è¦æ£€æµ‹å¤šä¸ªé£Ÿç‰©
- æœ‰æœåŠ¡å™¨èµ„æº
- å¯¹é€Ÿåº¦è¦æ±‚é«˜

**ä¸æ¨èä½¿ç”¨åœºæ™¯**ï¼š
- èµ„æºå—é™
- åªéœ€è¦ç®€å•è¯†åˆ«
- æ— æ³•éƒ¨ç½²åç«¯æœåŠ¡

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿ**
æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤éƒ¨ç½²YOLOæ£€æµ‹æœåŠ¡ï¼Œäº«å—é«˜ç²¾åº¦çš„é£Ÿç‰©è¯†åˆ«ï¼ğŸ‰
