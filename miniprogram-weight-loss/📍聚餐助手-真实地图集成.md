# 📍 聚餐助手 - 真实地图集成

## 🎉 功能更新

聚餐助手现已支持真实餐馆数据和地图导航功能！

---

## ✨ 新增功能

### 1. 双模式支持

#### 🎯 模拟数据模式（默认）
- 使用12家预设餐厅
- 无需配置，开箱即用
- 适合开发和测试

#### 🌐 真实地图模式
- 搜索真实餐馆POI
- 显示准确位置和距离
- 支持地图导航

### 2. 地图导航

- 🗺️ 一键打开微信内置地图
- 🧭 自动规划导航路线
- 🚶 支持多种导航方式（步行/驾车/公交/骑行）
- 📍 显示餐馆位置标记

### 3. 智能搜索

- 📡 基于真实位置搜索
- 🔍 支持1-5公里半径调整
- 🏷️ 按类型筛选（轻食/日料/中餐等）
- 📊 智能排序（推荐/距离/健康/评分）

### 4. 餐馆信息

- 📝 餐馆名称和地址
- 📞 联系电话
- ⭐ 综合评分
- 🔥 健康指数
- 💰 价格范围

---

## 🚀 快速开始

### 方式一：使用模拟数据（推荐新手）

**无需配置，直接使用！**

1. 打开聚餐助手
2. 点击"获取位置"
3. 点击"搜索附近健康餐厅"
4. 查看12家模拟餐厅
5. 点击"🗺️ 导航"测试导航功能

### 方式二：使用真实地图（需要配置）

**需要申请腾讯地图API Key**

#### 快速配置（5分钟）

查看详细指南：
```
⚡腾讯地图快速配置.md
```

#### 配置步骤

1. **申请API Key**
   - 访问：https://lbs.qq.com/
   - 注册并创建应用
   - 获取Key

2. **下载SDK**
   - 下载：https://lbs.qq.com/miniProgram/jsSdk/jsSdkGuide/jsSdkOverview
   - 放到：`utils/qqmap-wx-jssdk.js`

3. **配置Key**
   ```javascript
   // config/map.js
   module.exports = {
     qqmapKey: '你的Key',
     useRealAPI: true
   };
   ```

4. **测试功能**
   - 重新编译
   - 搜索餐馆
   - 测试导航

---

## 📁 新增文件

```
miniprogram-weight-loss/
├── config/
│   └── map.js                              # 地图配置文件 ⭐
├── utils/
│   └── qqmap-wx-jssdk.js                   # 腾讯地图SDK（需下载）
├── pages/
│   └── dining-assistant/
│       └── dining-assistant.js             # 已更新
├── 📍聚餐助手-真实地图集成.md              # 本文档
├── 🗺️真实地图导航功能完成.md              # 详细说明
└── ⚡腾讯地图快速配置.md                   # 配置指南
```

---

## 💡 使用建议

### 开发阶段

建议使用模拟数据：
- ✅ 无需API Key
- ✅ 快速测试
- ✅ 功能完整
- ✅ 不消耗配额

### 生产环境

启用真实地图：
- ✅ 真实数据
- ✅ 准确位置
- ✅ 实时导航
- ✅ 更好体验

---

## 🎨 功能演示

### 搜索餐馆

```
1. 获取位置
   ↓
2. 选择用餐类型
   ↓
3. 设置搜索半径
   ↓
4. 搜索餐馆
   ↓
5. 查看列表
```

### 地图导航

```
1. 选择餐馆
   ↓
2. 点击"🗺️ 导航"
   ↓
3. 打开微信地图
   ↓
4. 选择导航方式
   ↓
5. 开始导航
```

### 餐前建议

```
1. 查看餐馆详情
   ↓
2. 查看推荐菜品
   ↓
3. 获取餐前建议
   ↓
4. 前往用餐
```

### 餐后记录

```
1. 用餐完成
   ↓
2. 点击"餐后记录"
   ↓
3. 选择菜品
   ↓
4. 记录摄入
   ↓
5. 获取调整建议
```

---

## 🔧 技术特性

### 智能分类

自动识别餐馆类型：
- 🥗 轻食
- 🍱 便当
- 🍣 日料
- 🍜 中餐
- 🍲 火锅
- 🍔 快餐
- 🥬 素食

### 健康评分

基于类型估算健康指数：
- 轻食：95分
- 素食：90分
- 便当：85分
- 日料：80分
- 中餐：70分
- 火锅：60分
- 快餐：45分

### 推荐算法

综合评分考虑：
- 健康分数（40%）
- 距离远近（30%）
- 卡路里匹配（20%）
- 用户评分（10%）

---

## 📊 功能对比

| 功能 | 模拟模式 | 真实模式 |
|------|---------|---------|
| 餐馆数据 | 12家预设 | 真实POI |
| 位置信息 | 模拟 | 真实 |
| 距离计算 | 估算 | 精确 |
| 地图导航 | ✅ | ✅ |
| 需要配置 | ❌ | ✅ |
| 网络要求 | 低 | 高 |

---

## 🐛 常见问题

### Q: 如何切换模式？

修改配置文件：
```javascript
// config/map.js
useRealAPI: true  // 真实模式
useRealAPI: false // 模拟模式
```

### Q: 搜索不到餐馆？

1. 检查位置权限
2. 扩大搜索半径
3. 更改筛选条件
4. 使用模拟数据

### Q: 导航打不开？

1. 确认有位置信息
2. 检查微信版本
3. 重启小程序
4. 查看错误日志

### Q: API调用失败？

1. 检查Key是否正确
2. 确认SDK已安装
3. 查看API配额
4. 检查网络连接

---

## 📚 相关文档

### 详细说明

- `🗺️真实地图导航功能完成.md` - 完整功能说明
- `⚡腾讯地图快速配置.md` - 5分钟配置指南

### 官方文档

- 腾讯位置服务：https://lbs.qq.com/
- 微信地图API：https://developers.weixin.qq.com/miniprogram/dev/api/location/wx.openLocation.html
- SDK文档：https://lbs.qq.com/miniProgram/jsSdk/jsSdkGuide/jsSdkOverview

---

## ✅ 更新内容

### 代码更新

- ✅ 新增 `config/map.js` 配置文件
- ✅ 更新 `dining-assistant.js` 支持双模式
- ✅ 集成腾讯地图SDK
- ✅ 实现真实POI搜索
- ✅ 优化地图导航功能
- ✅ 添加餐馆分类算法
- ✅ 实现健康评分系统
- ✅ 优化推荐算法

### 文档更新

- ✅ 创建功能说明文档
- ✅ 创建配置指南
- ✅ 创建快速开始文档

---

## 🎯 下一步

### 建议操作

1. **测试模拟模式**
   - 熟悉功能
   - 测试导航
   - 体验流程

2. **申请API Key**
   - 访问腾讯位置服务
   - 创建应用
   - 获取Key

3. **配置真实模式**
   - 下载SDK
   - 配置Key
   - 测试功能

4. **优化体验**
   - 调整搜索半径
   - 设置筛选条件
   - 自定义推荐算法

---

## 🎊 总结

聚餐助手现在支持：

✅ **模拟数据模式** - 开箱即用，快速测试
✅ **真实地图模式** - 真实数据，精准导航
✅ **智能搜索** - 多维度筛选和排序
✅ **地图导航** - 一键打开微信地图
✅ **健康评估** - 智能推荐健康餐厅
✅ **营养建议** - 餐前餐后全程指导

**开始使用吧！享受智能聚餐助手带来的便利！** 🎉

---

**创建时间**：2025年12月27日
**版本**：v1.0
**状态**：✅ 已完成并同步
