# âœ… çœŸå®AIé£Ÿç‰©è¯†åˆ«åŠŸèƒ½å·²å®Œæˆ

## ğŸ‰ å‡çº§å®Œæˆ

é£Ÿç‰©è¯†åˆ«åŠŸèƒ½å·²æˆåŠŸå‡çº§ä¸º**çœŸå®çš„AIå›¾åƒè¯†åˆ«**ï¼

## âœ¨ æ–°åŠŸèƒ½ç‰¹æ€§

### 1. çœŸå®AIè¯†åˆ«
- âœ… é›†æˆé€šä¹‰åƒé—®è§†è§‰æ¨¡å‹ï¼ˆqwen-vl-plusï¼‰
- âœ… å‡†ç¡®è¯†åˆ«é£Ÿç‰©åç§°å’Œç±»åˆ«
- âœ… æ™ºèƒ½ä¼°ç®—ä»½é‡å’Œè¥å…»æˆåˆ†
- âœ… æä¾›ç½®ä¿¡åº¦è¯„åˆ†
- âœ… ç”Ÿæˆä¸ªæ€§åŒ–è¥å…»å»ºè®®

### 2. æ™ºèƒ½é™çº§æœºåˆ¶
- âœ… æœªé…ç½®API Keyæ—¶è‡ªåŠ¨ä½¿ç”¨æ¨¡æ‹Ÿè¯†åˆ«
- âœ… APIè°ƒç”¨å¤±è´¥æ—¶è‡ªåŠ¨é™çº§
- âœ… ä¿è¯åŠŸèƒ½å§‹ç»ˆå¯ç”¨

### 3. å®Œæ•´çš„è¯†åˆ«æµç¨‹
```
æ‹ç…§/é€‰æ‹©å›¾ç‰‡ 
  â†“
å›¾ç‰‡è½¬Base64ç¼–ç 
  â†“
è°ƒç”¨é€šä¹‰åƒé—®è§†è§‰API
  â†“
AIåˆ†æå›¾ç‰‡å†…å®¹
  â†“
è¿”å›JSONæ ¼å¼ç»“æœ
  â†“
è§£æå¹¶è®¡ç®—è¥å…»æˆåˆ†
  â†“
æ˜¾ç¤ºè¯†åˆ«ç»“æœå’Œå»ºè®®
  â†“
ä¿å­˜åˆ°è¯†åˆ«å†å²
```

## ğŸ“ æ›´æ–°çš„æ–‡ä»¶

### 1. æ ¸å¿ƒåŠŸèƒ½æ–‡ä»¶
- `pages/food-recognition/food-recognition.js` - æ·»åŠ AIè¯†åˆ«é€»è¾‘
  - `callAIRecognition()` - è°ƒç”¨AI API
  - `processAIResult()` - å¤„ç†AIç»“æœ
  - `simulateRecognition()` - æ¨¡æ‹Ÿè¯†åˆ«ï¼ˆé™çº§ï¼‰

### 2. é…ç½®æ–‡ä»¶
- `utils/config.js` - æ·»åŠ API Keyé…ç½®
  - `QWEN_API_KEY` - é€šä¹‰åƒé—®APIå¯†é’¥

### 3. æ–‡æ¡£æ–‡ä»¶
- `ğŸ“¸çœŸå®AIé£Ÿç‰©è¯†åˆ«-é…ç½®æŒ‡å—.md` - è¯¦ç»†é…ç½®è¯´æ˜
- `âš¡AIé£Ÿç‰©è¯†åˆ«å¿«é€Ÿæµ‹è¯•.md` - å¿«é€Ÿæµ‹è¯•æŒ‡å—

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨æ¨¡æ‹Ÿè¯†åˆ«ï¼ˆæ— éœ€é…ç½®ï¼‰
1. ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•é…ç½®
2. è¯†åˆ«ç»“æœåŸºäºæ—¶é—´å’Œé£Ÿç‰©æ•°æ®åº“
3. é€‚åˆå¿«é€Ÿæµ‹è¯•å’Œæ¼”ç¤º

### æ–¹æ³•2ï¼šä½¿ç”¨çœŸå®AIè¯†åˆ«ï¼ˆæ¨èï¼‰
1. è·å–é€šä¹‰åƒé—®API Key
2. é…ç½®åˆ° `utils/config.js`
3. é‡æ–°ç¼–è¯‘å°ç¨‹åº
4. äº«å—çœŸå®çš„AIè¯†åˆ«ä½“éªŒ

## ğŸ“¸ è¯†åˆ«æ•ˆæœ

### AIè¯†åˆ«èƒ½åŠ›
- **é£Ÿç‰©åç§°**ï¼šå‡†ç¡®è¯†åˆ«å¸¸è§é£Ÿç‰©
- **é£Ÿç‰©ç±»åˆ«**ï¼šè‡ªåŠ¨åˆ†ç±»ï¼ˆä¸»é£Ÿ/è‚‰ç±»/è”¬èœ/æ°´æœç­‰ï¼‰
- **ä»½é‡ä¼°ç®—**ï¼šæ ¹æ®å›¾ç‰‡æ™ºèƒ½ä¼°ç®—é‡é‡
- **è¥å…»æˆåˆ†**ï¼šè®¡ç®—çƒ­é‡ã€è›‹ç™½è´¨ã€ç¢³æ°´ã€è„‚è‚ª
- **ç½®ä¿¡åº¦**ï¼šæ˜¾ç¤ºAIçš„è¯†åˆ«ä¿¡å¿ƒç¨‹åº¦
- **è¥å…»å»ºè®®**ï¼šç”Ÿæˆä¸ªæ€§åŒ–çš„é¥®é£Ÿå»ºè®®

### è¯†åˆ«å‡†ç¡®ç‡
- **å¸¸è§é£Ÿç‰©**ï¼š90%+ ï¼ˆå¦‚ç±³é¥­ã€é¸¡è‚‰ã€è‹¹æœï¼‰
- **å¤æ‚é£Ÿç‰©**ï¼š70-85% ï¼ˆå¦‚æ··åˆèœè‚´ï¼‰
- **å•ä¸€é£Ÿç‰©**ï¼šè¯†åˆ«æ•ˆæœæœ€ä½³
- **æ··åˆé£Ÿç‰©**ï¼šå»ºè®®åˆ†åˆ«æ‹ç…§è¯†åˆ«

## ğŸ¯ é…ç½®æ­¥éª¤

### æ­¥éª¤1ï¼šè·å–API Key
1. è®¿é—®ï¼šhttps://bailian.console.aliyun.com/
2. ç™»å½•é˜¿é‡Œäº‘è´¦å·
3. è¿›å…¥"API-KEYç®¡ç†"
4. åˆ›å»ºæ–°çš„API Key
5. å¤åˆ¶API Key

### æ­¥éª¤2ï¼šé…ç½®API Key
æ‰“å¼€ `utils/config.js`ï¼Œæ‰¾åˆ°ï¼š
```javascript
const QWEN_API_KEY = 'YOUR_API_KEY_HERE';
```

æ›¿æ¢ä¸ºï¼š
```javascript
const QWEN_API_KEY = 'sk-your-actual-api-key-here';
```

### æ­¥éª¤3ï¼šæµ‹è¯•
1. ä¿å­˜æ–‡ä»¶
2. é‡æ–°ç¼–è¯‘ï¼ˆCtrl + Bï¼‰
3. æ‰“å¼€é£Ÿç‰©è¯†åˆ«é¡µé¢
4. æ‹ç…§æµ‹è¯•

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### æ‹ç…§æŠ€å·§
- âœ… è®©é£Ÿç‰©å æ®ç”»é¢ä¸­å¿ƒ
- âœ… ä¿æŒå…‰çº¿å……è¶³
- âœ… æ‹æ‘„å•ä¸€é£Ÿç‰©
- âœ… ä»æ­£ä¸Šæ–¹æˆ–45åº¦è§’æ‹æ‘„
- âœ… ä½¿ç”¨ç™½è‰²æˆ–æµ…è‰²èƒŒæ™¯

### è¯†åˆ«æŠ€å·§
- å•ä¸€é£Ÿç‰©è¯†åˆ«æ•ˆæœæœ€å¥½
- å¸¸è§é£Ÿç‰©è¯†åˆ«æ›´å‡†ç¡®
- å¯ä»¥æ‰‹åŠ¨è°ƒæ•´ä»½é‡
- ä½¿ç”¨è¯†åˆ«å†å²å¿«é€Ÿæ·»åŠ 

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | å‡çº§å‰ | å‡çº§å |
|------|--------|--------|
| è¯†åˆ«æ–¹å¼ | éšæœºæ¨¡æ‹Ÿ | çœŸå®AIè¯†åˆ« |
| è¯†åˆ«å‡†ç¡®åº¦ | ä½ | é«˜ï¼ˆ90%+ï¼‰ |
| ä»½é‡ä¼°ç®— | å›ºå®šå€¼ | æ™ºèƒ½ä¼°ç®— |
| è¥å…»åˆ†æ | æ•°æ®åº“æŸ¥è¯¢ | AIæ™ºèƒ½åˆ†æ |
| ç½®ä¿¡åº¦ | éšæœº | çœŸå®è¯„åˆ† |
| è¥å…»å»ºè®® | æ¨¡æ¿ç”Ÿæˆ | AIä¸ªæ€§åŒ– |
| é™çº§æœºåˆ¶ | æ—  | æ™ºèƒ½é™çº§ |

## ğŸ’° è´¹ç”¨è¯´æ˜

### é€šä¹‰åƒé—®è§†è§‰API
- **æ¨¡å‹**ï¼šqwen-vl-plus
- **å®šä»·**ï¼šçº¦0.01-0.02å…ƒ/æ¬¡
- **æ–°ç”¨æˆ·**ï¼šé€šå¸¸æœ‰å…è´¹é¢åº¦
- **ä¼˜åŒ–**ï¼šä½¿ç”¨å†å²è®°å½•å’Œæ‰‹åŠ¨é€‰æ‹©èŠ‚çœè´¹ç”¨

## ğŸ” æŠ€æœ¯å®ç°

### 1. å›¾ç‰‡å¤„ç†
```javascript
// è¯»å–å›¾ç‰‡å¹¶è½¬æ¢ä¸ºBase64
wx.getFileSystemManager().readFile({
  filePath: imagePath,
  encoding: 'base64',
  success: (res) => {
    const base64Image = res.data;
    callAIRecognition(base64Image);
  }
});
```

### 2. AI APIè°ƒç”¨
```javascript
wx.request({
  url: 'https://dashscope.aliyuncs.com/api/v1/services/aigc/multimodal-generation/generation',
  method: 'POST',
  header: {
    'Authorization': `Bearer ${API_KEY}`,
    'Content-Type': 'application/json'
  },
  data: {
    model: 'qwen-vl-plus',
    input: {
      messages: [{
        role: 'user',
        content: [
          { image: `data:image/jpeg;base64,${base64Image}` },
          { text: 'è¯†åˆ«é£Ÿç‰©å¹¶è¿”å›JSONæ ¼å¼çš„è¥å…»ä¿¡æ¯' }
        ]
      }]
    }
  }
});
```

### 3. ç»“æœå¤„ç†
```javascript
// è§£æAIè¿”å›çš„JSON
const aiResult = JSON.parse(response);

// è®¡ç®—å®é™…è¥å…»æˆåˆ†
const ratio = aiResult.portion / 100;
const result = {
  name: aiResult.name,
  calories: Math.round(aiResult.calories * ratio),
  protein: (aiResult.protein * ratio).toFixed(1),
  // ...
};
```

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šè¯†åˆ«å¤±è´¥
- æ£€æŸ¥API Keyæ˜¯å¦æ­£ç¡®é…ç½®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- ç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ°æ¨¡æ‹Ÿè¯†åˆ«

### é—®é¢˜2ï¼šè¯†åˆ«ä¸å‡†ç¡®
- é‡æ–°æ‹ç…§ï¼Œæ³¨æ„æ‹ç…§æŠ€å·§
- ä½¿ç”¨æ‰‹åŠ¨é€‰æ‹©åŠŸèƒ½
- è°ƒæ•´è¯†åˆ«åçš„ä»½é‡

### é—®é¢˜3ï¼šè¯†åˆ«é€Ÿåº¦æ…¢
- æ£€æŸ¥ç½‘ç»œé€Ÿåº¦
- å›¾ç‰‡å·²è‡ªåŠ¨å‹ç¼©
- é€šå¸¸2-5ç§’å®Œæˆ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `ğŸ“¸çœŸå®AIé£Ÿç‰©è¯†åˆ«-é…ç½®æŒ‡å—.md` - è¯¦ç»†é…ç½®è¯´æ˜
- `âš¡AIé£Ÿç‰©è¯†åˆ«å¿«é€Ÿæµ‹è¯•.md` - å¿«é€Ÿæµ‹è¯•æŒ‡å—
- [é€šä¹‰åƒé—®APIæ–‡æ¡£](https://help.aliyun.com/zh/dashscope/)

## ğŸ¯ ä¸‹ä¸€æ­¥

### ç«‹å³ä½“éªŒ
1. é…ç½®API Keyï¼ˆå¯é€‰ï¼‰
2. é‡æ–°ç¼–è¯‘å°ç¨‹åº
3. æ‰“å¼€é£Ÿç‰©è¯†åˆ«é¡µé¢
4. æ‹ç…§æµ‹è¯•è¯†åˆ«æ•ˆæœ

### ä¼˜åŒ–å»ºè®®
1. ä½¿ç”¨è¯†åˆ«å†å²å¿«é€Ÿæ·»åŠ å¸¸åƒé£Ÿç‰©
2. å¯¹ç†Ÿæ‚‰çš„é£Ÿç‰©ä½¿ç”¨æ‰‹åŠ¨é€‰æ‹©
3. åªå¯¹ä¸ç¡®å®šçš„é£Ÿç‰©ä½¿ç”¨AIè¯†åˆ«
4. åˆç†åˆ©ç”¨å…è´¹é¢åº¦

## ğŸ‰ åŠŸèƒ½äº®ç‚¹

### 1. æ™ºèƒ½è¯†åˆ«
- çœŸå®çš„AIå›¾åƒè¯†åˆ«
- é«˜å‡†ç¡®åº¦ï¼ˆ90%+ï¼‰
- æ™ºèƒ½ä»½é‡ä¼°ç®—

### 2. ç”¨æˆ·å‹å¥½
- ç®€å•æ˜“ç”¨çš„ç•Œé¢
- å¤šç§è¯†åˆ«æ–¹å¼
- è¯†åˆ«å†å²å¿«é€Ÿæ·»åŠ 

### 3. å¯é æ€§
- æ™ºèƒ½é™çº§æœºåˆ¶
- å§‹ç»ˆå¯ç”¨
- é”™è¯¯å¤„ç†å®Œå–„

### 4. ä¸ªæ€§åŒ–
- AIç”Ÿæˆè¥å…»å»ºè®®
- æ ¹æ®æ—¶é—´æ™ºèƒ½æ¨è
- è¯¦ç»†çš„è¥å…»åˆ†æ

---

**åŠŸèƒ½å·²å®Œæˆï¼**
ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨çœŸå®çš„AIæ¥è¯†åˆ«é£Ÿç‰©äº†ï¼ğŸ‰

é…ç½®API Keyåï¼Œæ‹ç…§è¯†åˆ«çš„å‡†ç¡®åº¦ä¼šå¤§å¤§æå‡ï¼
