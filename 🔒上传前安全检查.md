# 🔒 上传前安全检查清单

## ⚠️ 重要提醒

在上传到GitHub之前，**必须**确保所有敏感信息已被移除或替换为占位符！

---

## ✅ 已完成的安全检查

### 1. API密钥检查

#### ✅ 微信小程序配置 (miniprogram-weight-loss/utils/config.js)
- [x] `BAIDU_API_KEY` → `YOUR_API_KEY_HERE`
- [x] `BAIDU_SECRET_KEY` → `YOUR_SECRET_KEY_HERE`
- [x] `TENCENT_SECRET_ID` → `YOUR_SECRET_ID_HERE`
- [x] `TENCENT_SECRET_KEY` → `YOUR_SECRET_KEY_HERE`
- [x] `TENCENT_APP_ID` → `YOUR_APP_ID_HERE`
- [x] `QWEN_API_KEY` → `YOUR_API_KEY_HERE`
- [x] `appId` → `YOUR_APP_ID_HERE`
- [x] `appSecret` → `YOUR_APP_SECRET_HERE`

#### ✅ 后端配置
- [x] 无硬编码的密码或密钥
- [x] 使用环境变量或配置文件

### 2. .gitignore配置

#### ✅ 已排除的敏感文件
- [x] `*.env` - 环境变量文件
- [x] `.env.local` - 本地环境配置
- [x] `config/secrets.js` - 密钥配置
- [x] `utils/config.js` - 配置文件（已包含但内容安全）
- [x] `*.db` - 数据库文件
- [x] `*.sqlite` - SQLite数据库
- [x] `*.log` - 日志文件

#### ✅ 已排除的大文件
- [x] `*.pt` - PyTorch模型
- [x] `*.pth` - PyTorch权重
- [x] `*.onnx` - ONNX模型
- [x] `*.weights` - 权重文件
- [x] `models/` - 模型目录
- [x] `*.mp4` - 视频文件

#### ✅ 已排除的临时文件
- [x] `node_modules/` - Node依赖
- [x] `__pycache__/` - Python缓存
- [x] `.vscode/` - VS Code配置
- [x] `*.pyc` - Python编译文件

### 3. 文档检查

#### ✅ 必需文档
- [x] `README.md` - 项目说明
- [x] `LICENSE` - 开源协议
- [x] `CONTRIBUTING.md` - 贡献指南
- [x] `.gitignore` - Git忽略配置

#### ✅ 上传指南
- [x] `📤GitHub上传指南.md` - 详细步骤
- [x] `🚀快速上传到GitHub.md` - 快速指南
- [x] `✅GitHub上传准备完成.md` - 准备清单
- [x] `🔒上传前安全检查.md` - 本文档

---

## 🔍 手动验证步骤

### 步骤1：搜索可能的API密钥

在项目根目录运行以下命令：

```bash
# 搜索可能的OpenAI密钥
grep -r "sk-" . --exclude-dir=node_modules --exclude-dir=.git

# 搜索可能的API密钥
grep -r "api_key.*[a-zA-Z0-9]{32,}" . --exclude-dir=node_modules --exclude-dir=.git

# 搜索可能的密码
grep -r "password.*['\"][^'\"]{8,}" . --exclude-dir=node_modules --exclude-dir=.git
```

**预期结果**：应该只找到占位符（如`YOUR_API_KEY_HERE`）

### 步骤2：检查config.js文件

打开 `miniprogram-weight-loss/utils/config.js`，确认：

```javascript
// ✅ 正确的配置（占位符）
const BAIDU_API_KEY = 'YOUR_API_KEY_HERE';
const BAIDU_SECRET_KEY = 'YOUR_SECRET_KEY_HERE';

// ❌ 错误的配置（真实密钥）
const BAIDU_API_KEY = 'xYz123AbC456...'; // 不要这样！
```

### 步骤3：检查.env文件

确认所有`.env`文件都在`.gitignore`中：

```bash
# 查找所有.env文件
find . -name ".env*" -type f

# 检查.gitignore
cat .gitignore | grep "\.env"
```

**预期结果**：
- 找到的`.env`文件应该在`.gitignore`中
- 或者项目中没有`.env`文件

### 步骤4：检查大文件

```bash
# 查找大于50MB的文件
find . -type f -size +50M

# 查找模型文件
find . -name "*.pt" -o -name "*.pth" -o -name "*.onnx"
```

**预期结果**：
- 大文件应该在`.gitignore`中
- 或者已经删除

### 步骤5：检查Git状态

```bash
# 查看将要提交的文件
git status

# 查看被忽略的文件
git status --ignored
```

**预期结果**：
- 敏感文件应该在"ignored"列表中
- 不应该有意外的大文件

---

## 🚨 如果发现敏感信息

### 情况1：还未上传到GitHub

**解决方案**：
1. 立即替换为占位符
2. 重新检查
3. 确认安全后再上传

### 情况2：已经上传到GitHub

**紧急处理**：

#### 步骤1：立即删除或设为私有
```bash
# 在GitHub仓库页面：
# Settings → Danger Zone → Delete this repository
# 或
# Settings → Change visibility → Make private
```

#### 步骤2：更换所有泄露的密钥
- 百度AI：重新生成API Key
- 腾讯云：重新生成Secret Key
- 通义千问：重新生成API Key
- 微信小程序：重置AppSecret

#### 步骤3：清理Git历史
```bash
# 从Git历史中完全移除文件
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch miniprogram-weight-loss/utils/config.js" \
  --prune-empty --tag-name-filter cat -- --all

# 强制推送
git push origin --force --all
```

#### 步骤4：重新上传
1. 替换所有敏感信息为占位符
2. 重新提交
3. 重新推送

---

## 📋 最终检查清单

在运行上传脚本之前，请确认：

- [ ] 已阅读本文档的所有内容
- [ ] 已执行"手动验证步骤"中的所有命令
- [ ] 确认没有真实的API密钥
- [ ] 确认没有真实的密码
- [ ] 确认没有数据库文件
- [ ] 确认没有大型模型文件
- [ ] 确认`.gitignore`配置正确
- [ ] 已创建GitHub仓库
- [ ] 已获取Personal Access Token
- [ ] 准备好开始上传

---

## ✅ 安全确认

**我确认**：
- ✅ 所有API密钥都已替换为占位符
- ✅ 所有敏感信息都已移除
- ✅ `.gitignore`已正确配置
- ✅ 已完成所有安全检查
- ✅ 准备好上传到GitHub

---

## 🎯 下一步

安全检查通过后，你可以：

1. **运行上传脚本**
   - 双击 `初始化Git.bat`
   - 双击 `上传到GitHub.bat`

2. **或使用Git命令**
   ```bash
   git init
   git add .
   git commit -m "Initial commit: AI智能减重系统"
   git remote add origin https://github.com/your-username/AI-Weight-Loss-System.git
   git push -u origin main
   ```

3. **或使用GitHub Desktop**
   - 打开GitHub Desktop
   - Add local repository
   - Publish repository

---

## 📚 相关文档

- [✅GitHub上传准备完成.md](✅GitHub上传准备完成.md) - 准备清单
- [📤GitHub上传指南.md](📤GitHub上传指南.md) - 详细步骤
- [🚀快速上传到GitHub.md](🚀快速上传到GitHub.md) - 快速指南

---

## 🆘 需要帮助？

如果在安全检查过程中遇到问题：

1. 查看[📤GitHub上传指南.md](📤GitHub上传指南.md)的"常见问题"部分
2. 重新阅读本文档
3. 在GitHub上搜索相关问题

---

**记住**：一旦上传到GitHub，即使删除仓库，数据也可能被缓存或复制。所以**上传前的安全检查至关重要**！

**最后更新**: 2025-12-28
